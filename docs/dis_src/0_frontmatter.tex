% !TeX root = ../dissertation.tex
% Title page

\newcommand{\thedate}{14 May 2021}

\begin{titlepage}

    \rightline{\LARGE \textbf{William Robson}}

    \vspace*{60mm}

    \begin{center}
        \Huge
        \textbf{A JIT compiler for OCaml bytecode} \\[5mm]
        \Large
        Computer Science Tripos - Part II \\[5mm]
        Selwyn College \\[5mm]
        \thedate
    \end{center}

    \cleardoublepage

\end{titlepage}

\pagenumbering{roman}

\section*{Declaration of originality}

I, William Robson of Selwyn College, being a candidate for Part II of the Computer Science Tripos,
hereby declare that this dissertation and the work described in it are my own work, unaided except
as may be specified below, and that the dissertation does not contain material that has already
been used to any substantial extent for a comparable purpose. I am content for my dissertation to
be
made available to the students and staff of the University

Signed William Robson

Date \thedate

\clearpage

\section*{Proforma}

 {\large

  \begin{tabular}{ll}
      Candidate number:   & \textbf{2352A}                                 \\
      Title               & \textbf{A JIT compiler for OCaml bytecode}     \\
      Examination:        & \textbf{Computer Science Tripos Part II, 2021} \\
      Word Count:         & \textbf{TODO\footnotemark}                     \\
      Code Line Count     & \textbf{12,523\footnotemark}                   \\
      Project Originator: & \textbf{The author \& Dr Timothy Jones}        \\
      Project Supervisor: & \textbf{Dr Timothy Jones}                      \\
  \end{tabular}
 }
\footnotetext{Computed using \texttt{texcount -1 -inc dissertation.tex | cut -d "+" -f 1}}
\footnotetext{Underestimate only counting Rust code. Computed by \texttt{cloc src/rust/ocaml-jit*}
    and taking the Rust
    number for code lines (excluding blank and comment lines)}

\section*{Original Aims of the Project}

The project aimed to implement a just-in-time compiler for OCaml bytecode to x86\_64 machine code
on
Linux. The compiler would be integrated into the existing OCaml runtime and would support all
functionality but debugging and introspection. The project would collect a suite of benchmark
programs
and build an automated method to use them to compare performance to the existing compiler. It was
hoped
that the compiler would lead to faster execution times than the existing OCaml bytecode
interpreter.

\section*{Work Completed}

All original project aims were completed. In addition to this, I built a significant
extension: a second compiler which focuses on performance of the compiled code. The
two compilers are integrated with the second used for functions which are called often.

\section*{Special Difficulties}

The author received a two week extension due to a hospitalisation close to the deadline.

\cleardoublepage

\tableofcontents
% \listoffigures

\newpage

% \section*{Acknowledgements}

% my supervisor and director of studies

% I am also grateful for the assistance of Nick Fitzgerald, Chris Fallin and other Bytecode
% Alliance members who helped me in the Zulip chat to make all this work and reviewed my pull
% requests to cranelift.

\cleardoublepage
\setcounter{page}{1}
\pagenumbering{arabic}